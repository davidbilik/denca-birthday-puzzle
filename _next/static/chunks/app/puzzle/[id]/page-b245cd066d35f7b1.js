(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[963],{6665:(e,t,a)=>{Promise.resolve().then(a.bind(a,8192))},7711:(e,t,a)=>{"use strict";a.d(t,{default:()=>n.a});var s=a(1956),n=a.n(s)},6046:(e,t,a)=>{"use strict";var s=a(6658);a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},1956:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}});let s=a(306)._(a(580));function n(e,t){var a;let n={};"function"==typeof e&&(n.loader=e);let i={...n,...t};return(0,s.default)({...i,modules:null==(a=i.loadableGenerated)?void 0:a.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9827:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return n}});let s=a(3719);function n(e){let{reason:t,children:a}=e;if("undefined"==typeof window)throw new s.BailoutToCSRError(t);return a}},580:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return c}});let s=a(5155),n=a(2115),i=a(9827),o=a(9214);function r(e){return{default:e&&"default"in e?e.default:e}}let l={loader:()=>Promise.resolve(r(()=>null)),loading:null,ssr:!0},c=function(e){let t={...l,...e},a=(0,n.lazy)(()=>t.loader().then(r)),c=t.loading;function d(e){let r=c?(0,s.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,l=!t.ssr||!!t.loading,d=l?n.Suspense:n.Fragment,u=t.ssr?(0,s.jsxs)(s.Fragment,{children:["undefined"==typeof window?(0,s.jsx)(o.PreloadChunks,{moduleIds:t.modules}):null,(0,s.jsx)(a,{...e})]}):(0,s.jsx)(i.BailoutToCSR,{reason:"next/dynamic",children:(0,s.jsx)(a,{...e})});return(0,s.jsx)(d,{...l?{fallback:r}:{},children:u})}return d.displayName="LoadableComponent",d}},9214:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return r}});let s=a(5155),n=a(7650),i=a(5861),o=a(8284);function r(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let a=i.workAsyncStorage.getStore();if(void 0===a)return null;let r=[];if(a.reactLoadableManifest&&t){let e=a.reactLoadableManifest;for(let a of t){if(!e[a])continue;let t=e[a].files;r.push(...t)}}return 0===r.length?null:(0,s.jsx)(s.Fragment,{children:r.map(e=>{let t=a.assetPrefix+"/_next/"+(0,o.encodeURIPath)(e);return e.endsWith(".css")?(0,s.jsx)("link",{precedence:"dynamic",href:t,rel:"stylesheet",as:"style"},e):((0,n.preload)(t,{as:"script",fetchPriority:"low"}),null)})})}},877:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var s=a(5155),n=a(1714);function i(e){let{children:t}=e;return(0,s.jsx)(n.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},className:"bg-white/10 backdrop-blur-sm p-8 rounded-2xl shadow-xl",children:t})}},6559:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var s=a(5155),n=a(1714);function i(e){let{children:t}=e;return(0,s.jsx)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:t})}},8192:(e,t,a)=>{"use strict";a.d(t,{default:()=>b});var s=a(5155),n=a(2115),i=a(6046),o=a(3444),r=a(602),l=a(52);function c(e){let{value:t,onCopy:a}=e,[i,o]=(0,n.useState)(!1);return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"font-mono text-lg bg-background/10 p-4 rounded-lg break-all",children:t}),(0,s.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(t),a(t),o(!0),setTimeout(()=>o(!1),2e3)},className:"px-4 py-2 bg-secondary text-white rounded-full  hover:bg-opacity-90 transition-all text-sm",children:i?"Copied!":"Copy Morse Code"})]})}function d(e){let{value:t}=e;return(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsx)("div",{className:"font-mono text-lg bg-background/10 p-4 rounded-lg break-all",children:t})})}var u=a(5565);function p(e){let{src:t,alt:a}=e;return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"relative w-full aspect-video rounded-lg overflow-hidden",children:(0,s.jsx)(u.default,{src:t,alt:a,fill:!0,className:"object-cover blur-sm hover:blur-none transition-all duration-300"})}),(0,s.jsx)("p",{className:"text-sm text-secondary italic",children:"Hover over the image to see it more clearly"})]})}var m=a(6559),h=a(1714);function x(e){return e*Math.PI/180}let f=(0,a(7711).default)(()=>Promise.all([a.e(484),a.e(761),a.e(566)]).then(a.bind(a,4566)),{loadableGenerated:{webpack:()=>[4566]},ssr:!1,loading:()=>(0,s.jsx)("div",{className:"w-full aspect-[3/2] bg-background/10 animate-pulse rounded-lg"})});function y(e){let{cities:t,requiredPoints:a,onComplete:i,question:o}=e,[r,l]=(0,n.useState)(Array(t.length).fill(null)),[c,d]=(0,n.useState)(0),[u,p]=(0,n.useState)(t.map(e=>({cityName:e.name,attempts:0,bestDistance:1/0,points:0,completed:!1,lastDistance:void 0,lastPoint:void 0}))),[m,h]=(0,n.useState)(!1),y=t[c],g=u[c],v=(e,t)=>e<=10?t.points:e>=t.maxDistance?0:Math.round((1-(e-10)/(t.maxDistance-10))*t.points),b=u.reduce((e,t)=>e+t.points,0);return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("p",{className:"text-xl mb-8",children:o}),(0,s.jsx)("div",{className:"w-full aspect-[3/2] rounded-lg overflow-hidden",children:(0,s.jsx)(f,{instanceId:"map-".concat(c),onClick:(e,s)=>{if(m)return;let n=[e,s],o=[...r];o[c]=n,l(o);let f=function(e,t){let[a,s]=e,[n,i]=t,o=x(n-a),r=x(i-s),l=Math.sin(o/2)*Math.sin(o/2)+Math.cos(x(a))*Math.cos(x(n))*Math.sin(r/2)*Math.sin(r/2);return Math.round(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))*6371)}(n,y.coordinates),g=v(f,y),b=u.map((e,t)=>t!==c?e:{...e,attempts:e.attempts+1,lastDistance:f,lastPoint:n,bestDistance:g>e.points?f:e.bestDistance,points:g>e.points?g:e.points,completed:!0});p(b);let j=b.reduce((e,t)=>e+t.points,0);c===t.length-1?(h(!0),i(j>=a,j)):setTimeout(()=>{d(e=>e+1)},1500)},selectedPoint:r[c],bounds:[[35,-10],[70,40]]})}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("p",{className:"text-lg font-bold",children:["Find ",y.name]}),g.lastDistance&&(0,s.jsxs)("p",{className:"text-sm text-primary",children:["Last guess was ",Math.round(g.lastDistance),"km away",g.lastDistance===g.bestDistance&&" (Best attempt!)"]}),(0,s.jsxs)("p",{className:"text-sm",children:["Current points: ",b," / ",a," needed"]}),(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 mt-4",children:u.map((e,a)=>(0,s.jsx)("div",{className:"p-2 rounded ".concat(e.completed?e.points>0?"bg-success/20":"bg-error/20":a===c?"bg-primary/20":"bg-secondary/20"),children:(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"font-medium",children:t[a].name}),e.lastDistance&&(0,s.jsxs)("p",{className:"text-sm",children:["Distance: ",Math.round(e.lastDistance),"km",e.points>0&&" (".concat(e.points," points)")]}),e.completed&&!e.lastDistance&&(0,s.jsx)("p",{className:"text-sm italic",children:"Not attempted yet"})]})},a))})]})]})}function g(e){let{choices:t,onSelect:a,question:n}=e;return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("p",{className:"text-xl mb-8",children:n}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-4",children:t.map(e=>(0,s.jsx)("button",{onClick:()=>a(e.isCorrect||!1),className:"relative aspect-video rounded-lg overflow-hidden hover:ring-2 hover:ring-primary transition-all",children:(0,s.jsx)(u.default,{src:e.path,alt:e.label,fill:!0,className:"object-cover"})},e.id))})]})}var v=a(877);function b(e){let{puzzleId:t}=e,a=(0,i.useRouter)(),u=(0,o.t$)(t),[x,f]=(0,n.useState)(""),[b,j]=(0,n.useState)(!1),[w,P]=(0,n.useState)(""),[N,C]=(0,n.useState)(!1),{markPuzzleSolved:z}=(0,r.l)();return u?(0,s.jsx)(m.A,{children:(0,s.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center p-8",children:[!1,(0,s.jsxs)("div",{className:"max-w-2xl w-full space-y-8 text-center",children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold text-primary",children:["Puzzle ",t]}),(0,s.jsxs)(v.A,{children:[(()=>{var e,a,n;switch(u.type){case"morse":return(0,s.jsx)(c,{value:u.question,onCopy:()=>{}});case"cipher":return(0,s.jsx)(d,{value:u.question});case"image":return(0,s.jsx)(p,{src:(null===(e=u.additionalProps)||void 0===e?void 0:e.imagePath)||u.question,alt:"Puzzle Image"});case"map":if(!(null===(a=u.additionalProps)||void 0===a?void 0:a.mapPuzzle))return(0,s.jsx)("p",{children:"Map puzzle configuration missing"});return(0,s.jsx)(y,{cities:u.additionalProps.mapPuzzle.cities,requiredPoints:u.additionalProps.mapPuzzle.requiredPoints,question:u.question,onComplete:(e,a)=>{if(e)C(!0),P(""),z(t),(0,l.A)("correct");else{var s,n;P("You scored ".concat(a," points, but needed ").concat(null===(n=u.additionalProps)||void 0===n?void 0:null===(s=n.mapPuzzle)||void 0===s?void 0:s.requiredPoints,". Try again!")),(0,l.A)("incorrect")}}});case"image-choice":if(!(null===(n=u.additionalProps)||void 0===n?void 0:n.imageChoices))return(0,s.jsx)("p",{children:"Image choice puzzle configuration missing"});return(0,s.jsx)(g,{choices:u.additionalProps.imageChoices,question:u.question,onSelect:e=>{e?(C(!0),P(""),z(t),(0,l.A)("correct")):(P("Try another dish!"),(0,l.A)("incorrect"))}});default:return(0,s.jsx)("p",{className:"text-xl mb-8",children:u.question})}})(),!N&&"map"!==u.type&&"image-choice"!==u.type&&(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),x.toLowerCase().trim()===u.answer.toLowerCase()?(C(!0),P(""),z(t),(0,l.A)("correct")):(P("Try again!"),(0,l.A)("incorrect"))},className:"space-y-4",children:[(0,s.jsx)("input",{type:"text",value:x,onChange:e=>f(e.target.value),className:"w-full p-3 rounded-lg bg-black/30 border border-primary/30  focus:border-primary focus:ring-2 focus:ring-primary/50 outline-none text-white placeholder:text-white/50",placeholder:"Enter your answer..."}),w&&(0,s.jsx)("p",{className:"text-error",children:w}),(0,s.jsxs)("div",{className:"space-x-4",children:[(0,s.jsx)("button",{type:"submit",className:"px-6 py-2 bg-primary text-white rounded-full  hover:bg-opacity-90 transition-all",children:"Submit"}),(0,s.jsx)("button",{type:"button",onClick:()=>{j(!0),(0,l.A)("hint")},className:"px-6 py-2 bg-secondary text-white rounded-full  hover:bg-opacity-90 transition-all",children:"Need a Hint?"})]}),b&&(0,s.jsx)("p",{className:"text-secondary mt-4 italic",children:u.hint})]}),w&&("map"===u.type||"image-choice"===u.type)&&(0,s.jsx)("p",{className:"text-error mt-4",children:w}),N&&(0,s.jsxs)(h.P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"space-y-6",children:[(0,s.jsx)(h.P.p,{initial:{y:20},animate:{y:0},className:"text-success text-xl",children:"\uD83C\uDF89 Correct! \uD83C\uDF89"}),(0,s.jsxs)(h.P.p,{initial:{y:20},animate:{y:0},transition:{delay:.1},className:"text-accent font-bold",children:["Next Clue: ",u.nextLocationClue]}),(0,s.jsx)(h.P.button,{initial:{y:20},animate:{y:0},transition:{delay:.2},onClick:()=>{(0,o.zJ)(t)?((0,l.A)("complete"),a.push("/complete")):a.push("/puzzle/".concat(t+1))},className:"px-6 py-2 bg-primary text-white rounded-full  hover:bg-opacity-90 transition-all",children:(0,o.zJ)(t)?"Finish Adventure!":"Next Puzzle"})]})]})]})]})}):(a.push("/"),null)}},602:(e,t,a)=>{"use strict";a.d(t,{l:()=>c,w:()=>l});var s=a(5155),n=a(2115),i=a(3444);let o={currentPuzzleId:1,isComplete:!1,solvedPuzzles:[]},r=(0,n.createContext)(void 0);function l(e){let{children:t}=e,[a,l]=(0,n.useState)(()=>{{let e=localStorage.getItem("puzzleProgress");return e?JSON.parse(e):o}});return(0,n.useEffect)(()=>{localStorage.setItem("puzzleProgress",JSON.stringify(a))},[a]),(0,s.jsx)(r.Provider,{value:{puzzleState:a,markPuzzleSolved:e=>{l(t=>{let a=[...new Set([...t.solvedPuzzles,e])];return{currentPuzzleId:e+1,isComplete:a.length===i.Pm,solvedPuzzles:a}})},resetProgress:()=>{l(o)}},children:t})}function c(){let e=(0,n.useContext)(r);if(void 0===e)throw Error("usePuzzleContext must be used within a PuzzleProvider");return e}},3444:(e,t,a)=>{"use strict";a.d(t,{Pm:()=>n,t$:()=>i,zJ:()=>o});let s=[{id:1,type:"text",question:"Let's start with something simple. What has a face and two hands but no arms or legs?",answer:"clock",nextLocationClue:"Check around the luggages",hint:"We dont have any at home..."},{id:2,type:"morse",question:".- -. ... .-- . .-. / - --- / - .... . / ..- .-.. - .. -- .- - . / --.- ..- . ... - .. --- -. / --- ..-. / .-.. .. ..-. . / - .... . / ..- -. .. ...- . .-. ... . / .- -. -.. / . ...- . .-. -.-- - .... .. -. --.",answer:"42",nextLocationClue:"Check where the old phones are stored",hint:"You know it in youe heart..."},{id:3,type:"cipher",question:"BJ XMTZQI LWNQQ RTWJ",answer:"WE SHOULD GRILL MORE",nextLocationClue:"Check what's inside of a grill \uD83D\uDD0D",hint:"Enter deciphered phrase. ",additionalProps:{shift:5}},{id:4,type:"image-choice",question:"\xa1Hola foodie! Can you spot the authentic Oaxacan tlayudas among these Mexican dishes? Your dinner plans depend on it! \uD83C\uDF2E",answer:"tlayudas",nextLocationClue:"\xa1Excelente! Check behind the Mexican souvenir we brought from Mexico \uD83C\uDDF2\uD83C\uDDFD",hint:"Look for the large, crispy tortilla topped with refried beans, meat, and vegetables - it's like a Mexican pizza!",additionalProps:{imageChoices:[{id:1,path:"/images/enchiladas.jpeg",label:"Enchiladas"},{id:2,path:"/images/tlayudas.webp",label:"Tlayudas",isCorrect:!0},{id:3,path:"/images/tacos.jpg",label:"Tacos"},{id:4,path:"/images/quesadillas.jpg",label:"Quesadillas"}]}},{id:5,type:"map",question:"Blind maps. You love it. You are the absolute beast. Teachers and students were afraid of your skills. Let's check what's left in those rusty brains. Find these major cities on the map.",answer:"europe",nextLocationClue:"Great geography skills! Look like you have a lot of power.. power .. where do we store batteries? Can you check pls? \uD83D\uDDFA️",hint:"Think about famous landmarks in each city...",additionalProps:{mapPuzzle:{cities:[{name:"Paris",coordinates:[48.8566,2.3522],points:100,maxDistance:300},{name:"Berlin",coordinates:[52.52,13.405],points:100,maxDistance:300},{name:"Rome",coordinates:[41.9028,12.4964],points:100,maxDistance:300},{name:"London",coordinates:[51.5074,-.1278],points:100,maxDistance:300},{name:"Tallinn",coordinates:[59.437,24.7536],points:100,maxDistance:300},{name:"Podgorica",coordinates:[42.4304,19.2594],points:100,maxDistance:300}],requiredPoints:350,attemptsPerCity:1}}},{id:6,type:"math",question:"Let's test your math skills. I've heard you were pretty good as a scholar. Solve for x: log₂(x) = 3",answer:"8",nextLocationClue:"For this we have to go for a little walk \uD83D\uDE2C Do you know where is our \uD83D\uDEF5? Check the trunk.",hint:"Googling is allowed."}],n=s.length,i=e=>s.find(t=>t.id===e),o=e=>e===n},52:(e,t,a)=>{"use strict";a.d(t,{A:()=>r,H:()=>o});var s=a(5556);let n={start:["/sounds/start.m4a"],correct:["/sounds/correct1.m4a","/sounds/correct2.m4a","/sounds/correct3.m4a"],incorrect:["/sounds/incorrect.m4a"],complete:["/sounds/complete.m4a"],hint:["/sounds/hint.m4a"]},i={start:()=>{},stop:()=>{}},o=e=>{i=e},r=e=>{try{let t=n[e],a=t[Math.floor(Math.random()*t.length)],o=new s.Howl({src:[a],volume:.7,onend:()=>{i.stop()}});i.start(),o.play()}catch(e){console.error("Failed to play sound:",e)}}}},e=>{var t=t=>e(e.s=t);e.O(0,[41,565,441,517,358],()=>t(6665)),_N_E=e.O()}]);